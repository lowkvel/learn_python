{% extends "./base.html" %}

{% block title %}
    {% if tag %}
        标签页：{{ tag.name }}
    {% elif category %}
        分类页：{{ category.name }}
    {% else %}
        {{ post_detail.title }}
    {% endif %}
{% endblock title %}

{% block main %}

    {% if post_detail %}
        <div class="card post">
            <div class="card-body">
                <h1>{{ post_detail.title }}</h1>
                <span class="card-link">作者：<a href="{% url 'post_list_from_author_id_cbv' post_detail.owner.id %}">{{ post_detail.owner.username }}</a></span>
                <span class="card-link">分类：<a href="{% url 'post_list_from_category_id_cbv' post_detail.category.id %}">{{ post_detail.category.name }}</a></span>
                <span class="card-link">标签：<a href="{% url 'post_list_from_tag_id_cbv' post_detail.tag.id %}">{{ post_detail.tag.name }}</a></span>
                <span class="card-link">标签（循环取得，暂时失败）：
                    {% for tag in post_detail.tag.all %}
                        <a href="{% url 'post_list_from_tag_id_cbv' tag.id %}">{{ tag.name }}</a>
                    {% endfor %}
                </span>
                <p class="card-text">描述：{{ post_detail.desc }}</p>
                <p class="card-text">内容：{{ post_detail.content }}</p>
            </div>
        </div>
    {% endif %}

    <hr/>
    <div class="comment">
        <form class="form-group" action="/comment/" method="POST">
            {% csrf_token %}
            <input name="target" type="hidden" value="{{ request.path }}"/>
                {{ comment_form }}
            <input type="submit" value="写好了！"/>
        </form>
        <ul class="list-group">
            {% for comment in comment_list %}
                <li class="list-group-item">
                    <div class="nickname">
                        <a href="{{ comment.website }}">{{ comment.nickname }}</a>
                        <span>{{ comment.created_time }}</span>
                    </div>
                    <div class="comment-content">
                        {{ comment.content }}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>

{% endblock main%}
